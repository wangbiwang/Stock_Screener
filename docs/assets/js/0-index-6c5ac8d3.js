import{V as P,r as U,s as A,c as x,P as p,M as w,a as o,o as E,R as S,Z as k,J as R,a1 as C,a5 as N}from"./@vue-c73d5d4d.js";import{E as I,a as z,b as B,c as M,d as K,e as $}from"./element-plus-d1e6be34.js";import"./normalize-wheel-es-4ed993c7.js";import"./dayjs-71479f56.js";import"./@element-plus-fa23d0e3.js";import"./@ctrl-8a998e9d.js";import"./lodash-es-90298dfe.js";import"./@popperjs-c75af06c.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))m(_);new MutationObserver(_=>{for(const c of _)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&m(f)}).observe(document,{childList:!0,subtree:!0});function t(_){const c={};return _.integrity&&(c.integrity=_.integrity),_.referrerpolicy&&(c.referrerPolicy=_.referrerpolicy),_.crossorigin==="use-credentials"?c.credentials="include":_.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function m(_){if(_.ep)return;_.ep=!0;const c=t(_);fetch(_.href,c)}})();const q="modulepreload",F=function(b){return"/"+b},L={},v=function(u,t,m){if(!t||t.length===0)return u();const _=document.getElementsByTagName("link");return Promise.all(t.map(c=>{if(c=F(c),c in L)return;L[c]=!0;const f=c.endsWith(".css"),D=f?'[rel="stylesheet"]':"";if(!!m)for(let h=_.length-1;h>=0;h--){const y=_[h];if(y.href===c&&(!f||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${D}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":q,f||(g.as="script",g.crossOrigin=""),g.href=c,document.head.appendChild(g),f)return new Promise((h,y)=>{g.addEventListener("load",h),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})})).then(()=>u())},J=(b,u)=>{const t=b[u];return t?typeof t=="function"?t():Promise.resolve(t):new Promise((m,_)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(_.bind(null,new Error("Unknown variable dynamic import: "+u)))})},O=[20230202,20230203,20230206,20230207,20230208,20230209,20230210,20230213,20230214,20230215],G=Object.freeze(Object.defineProperty({__proto__:null,default:O},Symbol.toStringTag,{value:"Module"}));const H={class:"warp"},W={class:"box"},Y=o("div",{class:"tit"},"基础筛选条件：",-1),Z={class:"cont"},Q={class:"block"},X=o("div",{class:"block_title"},"数据日期范围：",-1),j={class:"block"},ee=o("div",{class:"block_title"},"筛除ST股:",-1),te={class:"block"},le=o("div",{class:"block_title"},"筛除科创板股:",-1),oe={class:"block"},se=o("div",{class:"block_title"},"股票现价区间(元):",-1),ne={style:{display:"inline-flex","align-items":"center"}},ie={class:"block"},ae=o("div",{class:"block_title"},"市值区间(亿元):",-1),re={style:{display:"inline-flex","align-items":"center"}},de={class:"block"},ce=o("div",{class:"block_title"},"涨跌幅区间(%):",-1),ue={style:{display:"inline-flex","align-items":"center"}},_e={class:"block"},pe=o("div",{class:"block_title"},"换手率区间(%):",-1),me={style:{display:"inline-flex","align-items":"center"}},fe={class:"block"},ve=o("div",{class:"block_title"},"成交额区间(万):",-1),ge={style:{display:"inline-flex","align-items":"center"}},he={class:"box"},ye=o("div",{class:"tit"},[k("额外筛选条件："),o("span",{style:{color:"red"}},"(调整额外筛选条件前,请先注意基础条件参数!)")],-1),Ve={class:"cont"},ke={class:"block"},be=o("div",{class:"text"},"额外条件1：振幅是递增趋势",-1),xe={class:"block"},Ee=o("div",{class:"text"},"额外条件2：换手是递增趋势",-1),De={class:"block"},we=o("div",{class:"text"},"额外条件3：成交额是递增趋势",-1),Se={class:"block"},Te=o("div",{class:"text"},"额外条件4：筛选数据组中，第一天的数据是负振幅,其它天数都是正振幅",-1),Ie={class:"block"},Le=o("div",{class:"text"},"额外条件5：放量策略，第一天换手率小于1，之后的交易日换手率大于1",-1),Oe={style:{"text-align":"center"}},Pe=o("div",null,"筛选结果：",-1),Ue={key:0,class:"cont"},Ae={key:1},Re={style:{margin:"10px"}},Ce={style:{display:"flex"}},Ne=["href"],ze={__name:"App",setup(b){const u=O.map(i=>{let e=String(i).substring(0,4),n=String(i).substring(4,6),r=String(i).substring(6,8);return new Date(e,Number(n)-1,r).getTime()}),t=P({select_date_day:[],select_date:"",select_ST:!0,select_KC:!0,price:[2,15],market_capitalization:[30,600],changepercent:[0,3],turnover_rate:[1,10],turnover:[5e3,1e6],e1:!0,e2:!0,e3:!0,e4:!1,e5:!1}),m=U([]),_=i=>u.indexOf(i.getTime())==-1,c=async()=>{const i=I.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});m.value=[],m.value=await h({...t}),i.close(),console.log(t,"---",await h({...t}))},f=()=>{let i=[];u.forEach((e,n)=>{e>=t.select_date[0]&&e<=t.select_date[1]&&i.push(y(e))}),t.select_date_day=i};A(async()=>{const i=I.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});t.select_date=[u[u.length-3],u[u.length-1]],t.select_date_day=[y(u[u.length-3]),y(u[u.length-2]),y(u[u.length-1])],m.value=await h({...t}),i.close(),console.log(m.value)});const D=i=>{let e=[];for(let n=0;n<i.length;n++){let r=i[n].split("=")[1];if(r){let s=r.split("~");e.push({_code:i[n].split("=")[0].split("_")[1],code:s[2],name:s[1],price:s[3],rate:s[32],vot:s[37],st:s[38],market_val:s[45]})}}return e},T=(i,e)=>{let n=[];for(let r=0;r<i.length;r++){const s=i[r];(e.select_ST?s.name.indexOf("ST")===-1:!0)&&(e.select_KC?s.code<688e3:!0)&&s.rate>e.changepercent[0]&&s.rate<e.changepercent[1]&&s.st>e.turnover_rate[0]&&s.st<e.turnover_rate[1]&&s.vot>e.turnover[0]&&s.vot<e.turnover[1]&&s.market_val>e.market_capitalization[0]&&s.market_val<e.market_capitalization[1]&&s.price>e.price[0]&&s.price<e.price[1]&&n.push(s)}return n},g=async i=>{let e=[],n=i.select_date_day;for(let r=0;r<n.length;r++){let s=n[r];const a=(await J(Object.assign({"../public/Stock_Data/20230202.json":()=>v(()=>import("./20230202-3bdd42c7.js"),[]),"../public/Stock_Data/20230203.json":()=>v(()=>import("./20230203-9e76cf93.js"),[]),"../public/Stock_Data/20230206.json":()=>v(()=>import("./20230206-503966b4.js"),[]),"../public/Stock_Data/20230207.json":()=>v(()=>import("./20230207-b3282033.js"),[]),"../public/Stock_Data/20230208.json":()=>v(()=>import("./20230208-a20c2518.js"),[]),"../public/Stock_Data/20230209.json":()=>v(()=>import("./20230209-27c48efb.js"),[]),"../public/Stock_Data/20230210.json":()=>v(()=>import("./20230210-9459a444.js"),[]),"../public/Stock_Data/20230213.json":()=>v(()=>import("./20230213-9281c5ec.js"),[]),"../public/Stock_Data/20230214.json":()=>v(()=>import("./20230214-086da00a.js"),[]),"../public/Stock_Data/20230215.json":()=>v(()=>import("./20230215-681bac35.js"),[]),"../public/Stock_Data/dateCode.json":()=>v(()=>Promise.resolve().then(()=>G),void 0)}),`../public/Stock_Data/${s}.json`)).default,d=D(a),l=T(d,i);e.push(l)}return e},h=async i=>{let e=new Map,n=[],r=await g(i);r.forEach(async a=>{a.forEach(d=>{let l=d.code,V=e.get(l);e.set(l,V?[V[0]+1,{rate:V[1].rate.concat(d.rate),st:V[1].st.concat(d.st),vot:V[1].vot.concat(d.vot)}]:[1,{rate:[d.rate],st:[d.st],vot:[d.vot]}])})}),e.forEach((a,d)=>a[0]>=r.length?n.push([d,a[1]]):null);function s(a,d=a.length){return d==1?!0:(d==2||s(a,d-1))&&Number(a[d-1])>Number(a[d-2])}return i.e1&&(n=n.filter(a=>s(a[1].rate))),i.e2&&(n=n.filter(a=>s(a[1].st))),i.e3&&(n=n.filter(a=>s(a[1].vot))),i.e4&&(n=n.filter(a=>{let d=!0;for(let l=1;l<a[1].rate.length-1;l++)if(a[1].rate[l]<0){d=!1;break}return a[1].rate[0]<0&&d})),i.e5&&(n=n.filter(a=>{let d=!0;for(let l=1;l<a[1].st.length-1;l++)if(a[1].st[l]<1){d=!1;break}return a[1].st[0]<1&&d})),n},y=i=>{let e=new Date(i),n=""+(e.getMonth()+1),r=""+e.getDate(),s=e.getFullYear();return n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),s+n+r};return(i,e)=>{const n=z,r=B,s=M,a=K,d=$;return E(),x("div",H,[p(a,{class:"screening_condition"},{default:w(()=>[o("div",W,[Y,o("div",Z,[o("div",Q,[X,p(n,{style:{"max-width":"300px"},modelValue:t.select_date,"onUpdate:modelValue":e[0]||(e[0]=l=>t.select_date=l),type:"daterange",onChange:f,"disabled-date":_,"start-placeholder":"Start Date","end-placeholder":"End Date","default-value":[new Date(2023,2,2),new Date(2023,2,3)]},null,8,["modelValue","default-value"]),o("div",null,"已选 "+S(t.select_date_day.length)+"天数据",1)]),o("div",j,[ee,p(r,{modelValue:t.select_ST,"onUpdate:modelValue":e[1]||(e[1]=l=>t.select_ST=l)},null,8,["modelValue"])]),o("div",te,[le,p(r,{modelValue:t.select_KC,"onUpdate:modelValue":e[2]||(e[2]=l=>t.select_KC=l)},null,8,["modelValue"])]),o("div",oe,[se,o("div",ne,[p(s,{modelValue:t.price[0],"onUpdate:modelValue":e[3]||(e[3]=l=>t.price[0]=l),class:"priceInput",style:{width:"60px","margin-right":"10px"}},null,8,["modelValue"]),k("-"),p(s,{modelValue:t.price[1],"onUpdate:modelValue":e[4]||(e[4]=l=>t.price[1]=l),class:"priceInput",style:{width:"60px","margin-left":"10px"}},null,8,["modelValue"])])]),o("div",ie,[ae,o("div",re,[p(s,{modelValue:t.market_capitalization[0],"onUpdate:modelValue":e[5]||(e[5]=l=>t.market_capitalization[0]=l),class:"priceInput",style:{width:"60px","margin-right":"10px"}},null,8,["modelValue"]),k("-"),p(s,{modelValue:t.market_capitalization[1],"onUpdate:modelValue":e[6]||(e[6]=l=>t.market_capitalization[1]=l),class:"priceInput",style:{width:"60px","margin-left":"10px"}},null,8,["modelValue"])])]),o("div",de,[ce,o("div",ue,[p(s,{modelValue:t.changepercent[0],"onUpdate:modelValue":e[7]||(e[7]=l=>t.changepercent[0]=l),class:"priceInput",style:{width:"60px","margin-right":"10px"}},null,8,["modelValue"]),k("-"),p(s,{modelValue:t.changepercent[1],"onUpdate:modelValue":e[8]||(e[8]=l=>t.changepercent[1]=l),class:"priceInput",style:{width:"60px","margin-left":"10px"}},null,8,["modelValue"])])]),o("div",_e,[pe,o("div",me,[p(s,{modelValue:t.turnover_rate[0],"onUpdate:modelValue":e[9]||(e[9]=l=>t.turnover_rate[0]=l),class:"priceInput",style:{width:"60px","margin-right":"10px"}},null,8,["modelValue"]),k("-"),p(s,{modelValue:t.turnover_rate[1],"onUpdate:modelValue":e[10]||(e[10]=l=>t.turnover_rate[1]=l),class:"priceInput",style:{width:"60px","margin-left":"10px"}},null,8,["modelValue"])])]),o("div",fe,[ve,o("div",ge,[p(s,{modelValue:t.turnover[0],"onUpdate:modelValue":e[11]||(e[11]=l=>t.turnover[0]=l),class:"priceInput",style:{width:"60px","margin-right":"10px"}},null,8,["modelValue"]),k("-"),p(s,{modelValue:t.turnover[1],"onUpdate:modelValue":e[12]||(e[12]=l=>t.turnover[1]=l),class:"priceInput",style:{width:"60px","margin-left":"10px"}},null,8,["modelValue"])])])])]),o("div",he,[ye,o("div",Ve,[o("div",ke,[p(r,{modelValue:t.e1,"onUpdate:modelValue":e[13]||(e[13]=l=>t.e1=l)},null,8,["modelValue"]),be]),o("div",xe,[p(r,{modelValue:t.e2,"onUpdate:modelValue":e[14]||(e[14]=l=>t.e2=l)},null,8,["modelValue"]),Ee]),o("div",De,[p(r,{modelValue:t.e3,"onUpdate:modelValue":e[15]||(e[15]=l=>t.e3=l)},null,8,["modelValue"]),we]),o("div",Se,[p(r,{modelValue:t.e4,"onUpdate:modelValue":e[16]||(e[16]=l=>t.e4=l)},null,8,["modelValue"]),Te]),o("div",Ie,[p(r,{modelValue:t.e5,"onUpdate:modelValue":e[17]||(e[17]=l=>t.e5=l)},null,8,["modelValue"]),Le])])])]),_:1}),o("div",Oe,[p(d,{type:"primary",onClick:c},{default:w(()=>[k("开始筛选")]),_:1})]),p(a,{class:"Results_of_screening"},{default:w(()=>[Pe,m.value.length==0?(E(),x("div",Ue,"NOT DATA")):(E(),x("div",Ae,[o("div",Re,"已筛选"+S(m.value.length)+"只代码，点击下方代码查看详情",1),o("div",Ce,[(E(!0),x(R,null,C(m.value,l=>(E(),x("a",{style:{"text-align":"center",width:"60px"},target:"_blank",href:"http://www.baidu.com/s?tn=68018901_17_oem_dg&ie=utf-8&wd="+l[0]},S(l[0]),9,Ne))),256))])]))]),_:1})])}}};N(ze).mount("#app");
