import{_ as i}from"./0-index-408ca013.js";import{E as y,a as x,e as j,f as w,g as U,d as M}from"./element-plus-b2ee86e9.js";import{V as C,r as S,s as N,U as z,o as b,c as D,a as l,R as E,P as c,M as V,Z as v,J as B,a1 as K}from"./@vue-191d933a.js";import"./vue-router-757101a6.js";import"./dayjs-71479f56.js";import"./@element-plus-418b309d.js";import"./@ctrl-8a998e9d.js";import"./lodash-es-3f983848.js";import"./@popperjs-c75af06c.js";import"./escape-html-1d60d822.js";import"./normalize-wheel-es-ed76fb12.js";const q=(h,u)=>{const o=h[u];return o?typeof o=="function"?o():Promise.resolve(o):new Promise((f,m)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(m.bind(null,new Error("Unknown variable dynamic import: "+u)))})},T=[20230202,20230203,20230206,20230207,20230208,20230209,20230210,20230213,20230214,20230215,20230216,20230217,20230220,20230221,20230222,20230223,20230224,20230227,20230228,20230301,20230302,20230303,20230306,20230307,20230308,20230309,20230310,20230313,20230314,20230315,20230316,20230317,20230320,20230321,20230322,20230323,20230324,20230327,20230328],$=Object.freeze(Object.defineProperty({__proto__:null,default:T},Symbol.toStringTag,{value:"Module"}));const F={class:"page"},J={style:{display:"flex","justify-content":"space-between","flex-direction":"row","align-items":"center","flex-wrap":"nowrap",margin:"0.5rem 1rem"}},G={style:{color:"red"}},H={class:"box"},Y=l("div",{class:"tit"},"基础筛选条件：",-1),Z={class:"cont"},Q={class:"block"},W=l("div",{class:"block_title"},"数据日期范围：",-1),X={style:{"margin-left":"0.5rem"}},tt={class:"block"},et=l("div",{class:"block_title"},"筛除ST股:",-1),ot={class:"block"},lt=l("div",{class:"block_title"},"筛除科创板股:",-1),it={class:"block"},st=l("div",{class:"block_title"},"股票现价区间(元):",-1),at={style:{display:"inline-flex","align-items":"center"}},nt={class:"block"},_t=l("div",{class:"block_title"},"市值区间(亿元):",-1),rt={style:{display:"inline-flex","align-items":"center"}},dt={class:"block"},ct=l("div",{class:"block_title"},"涨跌幅区间(%):",-1),ut={style:{display:"inline-flex","align-items":"center"}},pt={class:"block"},mt=l("div",{class:"block_title"},"换手率区间(%):",-1),vt={style:{display:"inline-flex","align-items":"center"}},bt={class:"block"},Dt=l("div",{class:"block_title"},"成交额区间(万):",-1),Vt={style:{display:"inline-flex","align-items":"center"}},kt={class:"box"},Et=l("div",{class:"tit"},[v(" 额外筛选条件："),l("span",{style:{color:"red"}},"(调整额外筛选条件前,请先注意基础条件参数!)")],-1),ft={class:"cont"},gt={class:"block"},ht=l("div",{class:"text"},"额外条件1：振幅是递增趋势",-1),yt={class:"block"},St=l("div",{class:"text"},"额外条件2：换手是递增趋势",-1),Tt={class:"block"},It=l("div",{class:"text"},"额外条件3：成交额是递增趋势",-1),Pt={class:"block"},Ot=l("div",{class:"text"},"额外条件4：筛选数据组中，第一天的数据是负振幅,其它天数都是正振幅",-1),At={class:"block"},Lt=l("div",{class:"text"},"额外条件5：放量策略，第一天换手率小于1，之后的交易日换手率大于1",-1),Rt={style:{"text-align":"center"}},xt=l("div",null,"筛选结果：",-1),jt={key:0,class:"cont"},wt={key:1},Ut={style:{margin:"10px"}},Mt={style:{display:"flex","flex-wrap":"wrap"}},Ct=["href"],Zt={__name:"tactics",setup(h){const u=T.map(r=>{let t=String(r).substring(0,4),n=String(r).substring(4,6),d=String(r).substring(6,8);return new Date(t,Number(n)-1,d).getTime()}),o=C({select_date_day:[],select_date:"",select_ST:!0,select_KC:!0,price:[2,15],market_capitalization:[30,600],changepercent:[0,3],turnover_rate:[1,10],turnover:[5e3,1e6],e1:!0,e2:!0,e3:!0,e4:!1,e5:!1}),f=S("-"),m=S([]),I=r=>u.indexOf(r.getTime())==-1,P=async()=>{const r=y.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});m.value=[],m.value=await g({...o}),r.close(),console.log(o,"---",await g({...o}))},O=()=>{let r=[];u.forEach((t,n)=>{t>=o.select_date[0]&&t<=o.select_date[1]&&r.push(k(t))}),o.select_date_day=r};N(async()=>{const r=y.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});o.select_date=[u[u.length-3],u[u.length-1]],o.select_date_day=[k(u[u.length-3]),k(u[u.length-2]),k(u[u.length-1])],m.value=await g({...o}),r.close()});const A=r=>{let t=[];for(let n=0;n<r.length;n++){let d=r[n].split("=")[1];if(d){let _=d.split("~");t.push({_code:r[n].split("=")[0].split("_")[1],code:_[2],name:_[1],price:_[3],rate:_[32],vot:_[37],st:_[38],market_val:_[45]})}}return t},L=(r,t)=>{let n=[];for(let d=0;d<r.length;d++){const _=r[d];(t.select_ST?_.name.indexOf("ST")===-1:!0)&&(t.select_KC?_.code<688e3:!0)&&_.rate>t.changepercent[0]&&_.rate<t.changepercent[1]&&_.st>t.turnover_rate[0]&&_.st<t.turnover_rate[1]&&_.vot>t.turnover[0]&&_.vot<t.turnover[1]&&_.market_val>t.market_capitalization[0]&&_.market_val<t.market_capitalization[1]&&_.price>t.price[0]&&_.price<t.price[1]&&n.push(_)}return n},R=async r=>{let t=[],n=r.select_date_day;for(let d=0;d<n.length;d++){let _=n[d];const s=(await q(Object.assign({"../public/Stock_Data/20230202.json":()=>i(()=>import("./20230202-3bdd42c7.js"),[]),"../public/Stock_Data/20230203.json":()=>i(()=>import("./20230203-9e76cf93.js"),[]),"../public/Stock_Data/20230206.json":()=>i(()=>import("./20230206-503966b4.js"),[]),"../public/Stock_Data/20230207.json":()=>i(()=>import("./20230207-b3282033.js"),[]),"../public/Stock_Data/20230208.json":()=>i(()=>import("./20230208-a20c2518.js"),[]),"../public/Stock_Data/20230209.json":()=>i(()=>import("./20230209-27c48efb.js"),[]),"../public/Stock_Data/20230210.json":()=>i(()=>import("./20230210-9459a444.js"),[]),"../public/Stock_Data/20230213.json":()=>i(()=>import("./20230213-9281c5ec.js"),[]),"../public/Stock_Data/20230214.json":()=>i(()=>import("./20230214-086da00a.js"),[]),"../public/Stock_Data/20230215.json":()=>i(()=>import("./20230215-681bac35.js"),[]),"../public/Stock_Data/20230216.json":()=>i(()=>import("./20230216-0c895ba7.js"),[]),"../public/Stock_Data/20230217.json":()=>i(()=>import("./20230217-fc9d1152.js"),[]),"../public/Stock_Data/20230220.json":()=>i(()=>import("./20230220-a6ca7a87.js"),[]),"../public/Stock_Data/20230221.json":()=>i(()=>import("./20230221-5cb39e40.js"),[]),"../public/Stock_Data/20230222.json":()=>i(()=>import("./20230222-5b304613.js"),[]),"../public/Stock_Data/20230223.json":()=>i(()=>import("./20230223-cfaec5a9.js"),[]),"../public/Stock_Data/20230224.json":()=>i(()=>import("./20230224-a86ce996.js"),[]),"../public/Stock_Data/20230227.json":()=>i(()=>import("./20230227-6fda72eb.js"),[]),"../public/Stock_Data/20230228.json":()=>i(()=>import("./20230228-68791d33.js"),[]),"../public/Stock_Data/20230301.json":()=>i(()=>import("./20230301-bc95e766.js"),[]),"../public/Stock_Data/20230302.json":()=>i(()=>import("./20230302-49b2bd6a.js"),[]),"../public/Stock_Data/20230303.json":()=>i(()=>import("./20230303-7b122911.js"),[]),"../public/Stock_Data/20230306.json":()=>i(()=>import("./20230306-662a293b.js"),[]),"../public/Stock_Data/20230307.json":()=>i(()=>import("./20230307-251b32c5.js"),[]),"../public/Stock_Data/20230308.json":()=>i(()=>import("./20230308-06eb0bcb.js"),[]),"../public/Stock_Data/20230309.json":()=>i(()=>import("./20230309-3ce372dd.js"),[]),"../public/Stock_Data/20230310.json":()=>i(()=>import("./20230310-f7a920d5.js"),[]),"../public/Stock_Data/20230313.json":()=>i(()=>import("./20230313-c3fc9a1a.js"),[]),"../public/Stock_Data/20230314.json":()=>i(()=>import("./20230314-9d62c184.js"),[]),"../public/Stock_Data/20230315.json":()=>i(()=>import("./20230315-548f795b.js"),[]),"../public/Stock_Data/20230316.json":()=>i(()=>import("./20230316-5b05ecaa.js"),[]),"../public/Stock_Data/20230317.json":()=>i(()=>import("./20230317-7ca300e3.js"),[]),"../public/Stock_Data/20230320.json":()=>i(()=>import("./20230320-af45d1f0.js"),[]),"../public/Stock_Data/20230321.json":()=>i(()=>import("./20230321-75f0ee3c.js"),[]),"../public/Stock_Data/20230322.json":()=>i(()=>import("./20230322-3e042c44.js"),[]),"../public/Stock_Data/20230323.json":()=>i(()=>import("./20230323-d1e3ec32.js"),[]),"../public/Stock_Data/20230324.json":()=>i(()=>import("./20230324-5c3b4d78.js"),[]),"../public/Stock_Data/20230327.json":()=>i(()=>import("./20230327-69b556ef.js"),[]),"../public/Stock_Data/20230328.json":()=>i(()=>import("./20230328-08050ed6.js"),[]),"../public/Stock_Data/dateCode.json":()=>i(()=>Promise.resolve().then(()=>$),void 0)}),`../public/Stock_Data/${_}.json`)).default;if(_==n[n.length-1]){let e=s[0].split("=")[1].split("~")[30];f.value=e.substring(0,4)+"-"+e.substring(4,6)+"-"+e.substring(6,8)+" "+e.substring(8,10)+":"+e.substring(10,12)}const a=A(s),p=L(a,r);t.push(p)}return t},g=async r=>{let t=new Map,n=[],d=await R(r);d.forEach(async s=>{s.forEach(a=>{let p=a.code,e=t.get(p);t.set(p,e?[e[0]+1,{rate:e[1].rate.concat(a.rate),st:e[1].st.concat(a.st),vot:e[1].vot.concat(a.vot)},a._code]:[1,{rate:[a.rate],st:[a.st],vot:[a.vot]},a._code])})}),t.forEach((s,a)=>s[0]>=d.length?n.push([a,s[1],s[2]]):null);function _(s,a=s.length){return a==1?!0:(a==2||_(s,a-1))&&Number(s[a-1])>Number(s[a-2])}return r.e1&&(n=n.filter(s=>_(s[1].rate))),r.e2&&(n=n.filter(s=>_(s[1].st))),r.e3&&(n=n.filter(s=>_(s[1].vot))),r.e4&&(n=n.filter(s=>{let a=!0;for(let p=1;p<s[1].rate.length-1;p++)if(s[1].rate[p]<0){a=!1;break}return s[1].rate[0]<0&&a})),r.e5&&(n=n.filter(s=>{let a=!0;for(let p=1;p<s[1].st.length-1;p++)if(s[1].st[p]<1){a=!1;break}return s[1].st[0]<1&&a})),n},k=r=>{let t=new Date(r),n=""+(t.getMonth()+1),d=""+t.getDate(),_=t.getFullYear();return n.length<2&&(n="0"+n),d.length<2&&(d="0"+d),_+n+d};return(r,t)=>{const n=z("router-link"),d=x,_=j,s=w,a=U,p=M;return b(),D("div",F,[l("div",J,[l("div",G,"最近更新时间："+E(f.value),1),l("div",null,[c(d,{type:"primary"},{default:V(()=>[c(n,{to:"/ranking"},{default:V(()=>[v("进入排名页")]),_:1})]),_:1})])]),c(p,{class:"screening_condition"},{default:V(()=>[l("div",H,[Y,l("div",Z,[l("div",Q,[W,c(_,{style:{"max-width":"300px"},modelValue:o.select_date,"onUpdate:modelValue":t[0]||(t[0]=e=>o.select_date=e),type:"daterange",onChange:O,"disabled-date":I,"start-placeholder":"Start Date","end-placeholder":"End Date","default-value":[new Date(2023,2,2),new Date(2023,2,3)]},null,8,["modelValue","default-value"]),l("div",X,"已选"+E(o.select_date_day.length)+"天数据",1)]),l("div",tt,[et,c(s,{modelValue:o.select_ST,"onUpdate:modelValue":t[1]||(t[1]=e=>o.select_ST=e)},null,8,["modelValue"])]),l("div",ot,[lt,c(s,{modelValue:o.select_KC,"onUpdate:modelValue":t[2]||(t[2]=e=>o.select_KC=e)},null,8,["modelValue"])]),l("div",it,[st,l("div",at,[c(a,{type:"number",modelValue:o.price[0],"onUpdate:modelValue":t[3]||(t[3]=e=>o.price[0]=e),modelModifiers:{number:!0},class:"priceInput"},null,8,["modelValue"]),v("-"),c(a,{type:"number",modelValue:o.price[1],"onUpdate:modelValue":t[4]||(t[4]=e=>o.price[1]=e),modelModifiers:{number:!0},class:"priceInput"},null,8,["modelValue"])])]),l("div",nt,[_t,l("div",rt,[c(a,{type:"number",modelValue:o.market_capitalization[0],"onUpdate:modelValue":t[5]||(t[5]=e=>o.market_capitalization[0]=e),modelModifiers:{number:!0},class:"priceInput"},null,8,["modelValue"]),v("-"),c(a,{type:"number",modelValue:o.market_capitalization[1],"onUpdate:modelValue":t[6]||(t[6]=e=>o.market_capitalization[1]=e),modelModifiers:{number:!0},class:"priceInput"},null,8,["modelValue"])])]),l("div",dt,[ct,l("div",ut,[c(a,{type:"number",modelValue:o.changepercent[0],"onUpdate:modelValue":t[7]||(t[7]=e=>o.changepercent[0]=e),modelModifiers:{number:!0},class:"priceInput"},null,8,["modelValue"]),v("-"),c(a,{type:"number",modelValue:o.changepercent[1],"onUpdate:modelValue":t[8]||(t[8]=e=>o.changepercent[1]=e),modelModifiers:{number:!0},class:"priceInput"},null,8,["modelValue"])])]),l("div",pt,[mt,l("div",vt,[c(a,{type:"number",modelValue:o.turnover_rate[0],"onUpdate:modelValue":t[9]||(t[9]=e=>o.turnover_rate[0]=e),modelModifiers:{number:!0},class:"priceInput"},null,8,["modelValue"]),v("-"),c(a,{type:"number",modelValue:o.turnover_rate[1],"onUpdate:modelValue":t[10]||(t[10]=e=>o.turnover_rate[1]=e),modelModifiers:{number:!0},class:"priceInput"},null,8,["modelValue"])])]),l("div",bt,[Dt,l("div",Vt,[c(a,{type:"number",modelValue:o.turnover[0],"onUpdate:modelValue":t[11]||(t[11]=e=>o.turnover[0]=e),modelModifiers:{number:!0},class:"priceInput"},null,8,["modelValue"]),v("-"),c(a,{type:"number",modelValue:o.turnover[1],"onUpdate:modelValue":t[12]||(t[12]=e=>o.turnover[1]=e),modelModifiers:{number:!0},class:"priceInput"},null,8,["modelValue"])])])])]),l("div",kt,[Et,l("div",ft,[l("div",gt,[c(s,{modelValue:o.e1,"onUpdate:modelValue":t[13]||(t[13]=e=>o.e1=e)},null,8,["modelValue"]),ht]),l("div",yt,[c(s,{modelValue:o.e2,"onUpdate:modelValue":t[14]||(t[14]=e=>o.e2=e)},null,8,["modelValue"]),St]),l("div",Tt,[c(s,{modelValue:o.e3,"onUpdate:modelValue":t[15]||(t[15]=e=>o.e3=e)},null,8,["modelValue"]),It]),l("div",Pt,[c(s,{modelValue:o.e4,"onUpdate:modelValue":t[16]||(t[16]=e=>o.e4=e)},null,8,["modelValue"]),Ot]),l("div",At,[c(s,{modelValue:o.e5,"onUpdate:modelValue":t[17]||(t[17]=e=>o.e5=e)},null,8,["modelValue"]),Lt])])])]),_:1}),l("div",Rt,[c(d,{type:"primary",onClick:P},{default:V(()=>[v("开始筛选")]),_:1})]),c(p,{class:"Results_of_screening"},{default:V(()=>[xt,m.value.length==0?(b(),D("div",jt,"NOT DATA")):(b(),D("div",wt,[l("div",Ut,"已筛选"+E(m.value.length)+"只代码，点击下方代码查看详情",1),l("div",Mt,[(b(!0),D(B,null,K(m.value,e=>(b(),D("a",{style:{"text-align":"center",width:"70px"},target:"_blank",href:`http://quote.eastmoney.com/concept/${e[2]}.html?from=classic#fschart-k`},E(e[0]),9,Ct))),256))])]))]),_:1})])}}};export{Zt as default};
